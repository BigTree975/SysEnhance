# ✈️ 一、工具概述

## SysEnhance

- Linux 系统配置安全基线检测
- Linux 系统安全基线加固

## 🏂 使用 

```bash
# 系统基线检查
sudo sh CentOS_Check.sh

# 系统基线加固
sudo sh CentOS_Reinforce.sh  
```

#### 系统检查

> 使用效果图

![image-20231013093513077](https://p.ipic.vip/1trf0g.png)

![image-20231013093420982](https://p.ipic.vip/ag8src.png)

#### 系统加固

> 使用效果

![image-20231013093844101](https://p.ipic.vip/g0trbb.png)

## 🎡 选项

```bash
# 加固脚本选项
1     一键进行全部加固       
2     设置密码有效期、复杂度、删除空密码账号        
3		  添加eproot账号    
4		  远程登录禁止root远程登入、使用ssh2协议、禁用dns解析、关闭GSSAPIAuthentication登录认证、关闭cbc分组加密      
5			设置history保存行数以及命令时间，设置窗口超时时间       
6     更改SSH端口                      
7     登录失败三次锁定600s           
8     还原配置文件为系统默认初始化配置           
9     设置内核参数：屏蔽ip重定向、禁止任何人拉起cron任务     
10    其他：禁用ftp、telnet、设置banner信息相关文件权限为644  
0     退出脚本
```

### 🎨 注意事项

由于修改系统默认配置的影响不确定性, 检测脚本与加固脚本采用不同覆盖度的操作

- 检测脚本 : 按照系统加固配置基线文档全覆盖检测

- 加固脚本: 只设置影响性确定不会影响系统正常使用的配置,无法确定影响性的配置项需要操作者根据检测脚本的结果进行判断, 手动进行处理, 并做好记录, 发送邮件给相关人员

- 检测结果： 运行脚本将结果输出到同级目录的res_system_check.txt文件中，脚本结果需要人为检查，根据检查结果运行加固脚本，选择对应的加固项。

## ⛪ 检查清单

#### 系统检查清单

- 系统基本信息
- 资源使用情况
- 系统安全基线检测列表    
  1. 检测密码有效期设置  
  2. 检测密码强度检查配置   
     3.检查空口令账号   
     4.检查账户锁定配置   
     5.检查除root之外的账户UID为0  
     6.检查环境变量包含父目录  
     7.检查环境变量包含组权限为777的目录  
     8.远程连接安全性  
     9.检查umask配置  
     10.检查重要文件和目录的权限  
     11.检查未授权的SUID/SGID文件  
     12.检查任何人都有写权限的目录  
     13.检查任何人都有写权限的文件  
     14.检查没有属主的文件  
     15.检查异常的隐藏文件  
     16.检查登录超时设置  
     17.检查ssh 和telnet运行状态  
     18.远程登录限制   
     19.检查运行的服务     
     20.检查core dump 状态    
     21.检查rsyslog状态  
     22.检查系统默认账户  
     23.检查ftp服务状态  
     24.检查内核参数   
     25.检查icmp配置    
     26.检查定时任务    
     27.检查banner信息    
     28.检查history时间戳是否配置   
     29.检查系统默认的ttl值   
     30.检查是否禁止ssh的cbc分组加密   

#### 系统加固清单

1        一键进行全部加固       
2        设置密码有效期、复杂度、删除空密码账号        
3	    添加eproot账号    
4	    远程登录禁止root远程登入、使用ssh2协议、禁用dns解析、关闭GSSAPIAuthentication登录认证、关闭cbc分组加密      
5	    设置history保存行数以及命令时间，设置窗口超时时间       
6        更改SSH端口                      
7        登录失败三次锁定600s           
8        还原配置文件为系统默认初始化配置           
9        设置内核参数：屏蔽ip重定向、禁止任何人拉起cron任务     
10       其他：禁用ftp、telnet、设置banner信息相关文件权限为644  
0        退出脚本
